# Repository Integration Tests - 検証観点一覧

このディレクトリは、永続化層（Repository）の統合テストを担います。
以下は、OrganizerRepository における主なテスト観点とそのカバレッジ状況です。

## ✅ 統合テストにおける検証観点一覧

| 観点                         | 内容                                      | 理由                                   | 現状の状況                                     |
| -------------------------- | --------------------------------------- | ------------------------------------ | ----------------------------------------- |
| **1. Repository層とDBの接続確認** | `save`, `findById`, `findByEmail` が動作する | Spring Data JPA・Converter・マッピング設定の確認 | ✅ 済                                       |
| **2. VOのマッピング確認**          | `EmailAddress` と `Role`（enum）の保存・復元     | VO/enum変換バグを防ぐ                       | ✅ 済                                       |
| **3. 実DBでの制約確認**           | 一意制約（tenant\_id＋email）・null制約           | Flywayマイグレーションの退行検知、JPAとの整合性検証       | ✅ 一意制約のみ、null制約はKotlin型で保証済（@Disabledで除外） |
| **4. 存在しないデータの検索**         | 存在しないIDやEmailがnullになる                   | Repositoryの境界仕様として重要                 | ✅ 済                                       |
| **5. 重複Email登録時の例外**       | 同じメールアドレスを保存しようとすると例外発生                 | DB上のUNIQUE制約が機能していることを確認             | ✅ 済                                       |

## 備考

* `@Disabled` によってKotlinの型安全で担保されている制約確認はスキップしています。
* Flyway マイグレーションが変更された場合は観点3を重点的に再確認してください。
