/* =========================================================
   【V0】初期セットアップ用 ロールと権限付与
   ========================================================= */

DO $$
BEGIN
    IF NOT EXISTS (SELECT 1 FROM pg_roles WHERE rolname = 'secret') THEN
CREATE ROLE secret WITH LOGIN PASSWORD 'password';
END IF;
END
$$;

/* =========================================================
   publicスキーマへの全権限を付与
   （テーブル、ビュー、シーケンスの操作を許可）
   ========================================================= */
GRANT ALL ON SCHEMA public TO secret;

/* =========================================================
   データベースへのCREATE権限を付与
   （今後のマイグレーションでテーブル等を作成可能にする）
   ========================================================= */
GRANT CREATE ON DATABASE postgres TO secret;
